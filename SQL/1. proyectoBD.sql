-- MySQL Script generated by MySQL Workbench
-- Sat Oct 22 20:18:50 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `ProyectoBD` ;

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `proyectoBD` DEFAULT CHARACTER SET utf8 ;
USE `proyectoBD` ;


-- -----------------------------------------------------
-- Table `mydb`.`CLIENTE`
-- -----------------------------------------------------
DROP TABLE IF EXISTS CLIENTE;

CREATE TABLE IF NOT EXISTS CLIENTE (
  cli_documento INT NOT NULL,
  cli_nombreCompleto VARCHAR(100) NOT NULL,
  cli_direccion varchar(100) NOT NULL,
  cli_numContacto  bigint NOT NULL,
  cli_correo VARCHAR(100) not NULL,
  
  PRIMARY KEY (cli_documento)
  )
ENGINE = InnoDB;
Insert into CLIENTE values
('4322245', 'Reina Velazquez', 'Cra 17a #98-20 apto 608', 3143587489, 'reinave211@gmail.com'),
('5566345', 'Gloria Delgado', 'Cra 102 #154-30 int a apto 205', 3014306469, 'glodelgado@hotmail.com'),
('5423664', 'Anita De Pacheco', 'Calle 146#6-24', 3108806301, 'pachecoAna45@gmail.com'),
('64553221', 'Manuel Bolivar', 'Cra 21#137-37 apto 503', 3166912061, 'manuelBo21@hotmail.com'),
('7564322', 'Carlos Saboya', 'Cra 76 #152b-77', 3214568797, 'casava@gmail.com'),
('5534441', 'Santiago ballesteros', 'Cra 6 #79-71', 3212347512, 'ballessa@gmail.com'),
('2122887', 'Isabel Garzon', 'Cr 53 #127-70 apto712 torre 3', 3158427516, 'isaga12@hotmail.com'),
('6344421', 'Leidy Gil', 'Cra 49 #142-13', 3175994177, 'lady-2629@hotmail.com'),
('8966421', 'Gloria Sarate', 'Calle 145 #13a-80', 3204739078, 'glo56sarate@hotmail.com');

-- -----------------------------------------------------
-- Table `mydb`.`INSTALADOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS INSTALADOR;

CREATE TABLE IF NOT EXISTS INSTALADOR (
  ins_documento INT NOT NULL,
  ins_nombreCompleto VARCHAR(100) NOT NULL,
  ins_numContacto bigint NOT NULL,
  ins_especialidad enum ('Cortinas', 'Pisos' , 'Motores') NOT NULL,
  ins_tarifa INT,
  
  PRIMARY KEY (ins_documento)
)
ENGINE = InnoDB;
insert into INSTALADOR VALUES
(4556673, 'Jose Marciales', 3125443143,'Cortinas', 15000),
(3112386, 'Rolando Muños', 3156789054,'Cortinas', 25000),
(3466781, 'Oscar Olaya', 3214563212,'Cortinas', 25000),
(5787653, 'Hector Molina',3117689043, 'Pisos', 7000),
(7764523, 'Carlos Pernia',3209894675, 'Pisos', 9000);

-- -----------------------------------------------------
-- Table `mydb`.`SUCURSAL`
-- -----------------------------------------------------
DROP TABLE IF EXISTS SUCURSAL;

CREATE TABLE IF NOT EXISTS SUCURSAL (
  suc_direccion varchar(100) NOT NULL,
  suc_nombre VARCHAR(45) NOT NULL,
  PRIMARY KEY (suc_direccion)
)
ENGINE = InnoDB;
Insert into SUCURSAL VALUES 
('Cr51 #134-14', 'Decorisa Spring'),
('Cr17 #161-31', 'Decorisa Toberin'),
('Cr35a #57 91', 'Decorisa Teusaquillo')
;

-- -----------------------------------------------------
-- Table `mydb`.`ASESOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS ASESOR ;

CREATE TABLE IF NOT EXISTS ASESOR (
  ase_documento INT NOT NULL,
  ase_nombreCompleto VARCHAR(100) NOT NULL,
  ase_numContacto bigint NOT NULL,
  ase_ventasMes SMALLINT NULL,
  SUCURSAL_suc_direccion varchar(100) NOT NULL,
  PRIMARY KEY (ase_documento),
  FOREIGN KEY (SUCURSAL_suc_direccion) REFERENCES SUCURSAL (suc_direccion)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB;
insert into ASESOR VALUES
('21112922', 'Gloria Isabel Feo Leon', 3115835465, 4, 'Cr51 #134-14'),
('1000184885', 'Juan David Palacios Feo',3133925698, 2, 'Cr51 #134-14'),
('34555212', 'Clemencia Lopez', 3214539081, 1 ,'Cr17 #161-31'),
('12567831', 'Giovani Gutierrez', 3127893423, 3, 'Cr35a #57 91')
;

-- -----------------------------------------------------
-- Table `mydb`.`PRODUCTOR`
-- -----------------------------------------------------
DROP TABLE IF EXISTS PRODUCTOR ;

CREATE TABLE IF NOT EXISTS PRODUCTOR (
  pro_nombreEmpresa VARCHAR(70) NOT NULL,
  pro_contactoAsesor BIGINT NOT NULL,
  pro_nombre_asesor VARCHAR(45) NOT NULL,
  pro_tipoProductos enum('Cortinas', 'Pisos') NOT NULL,
  pro_comprasMes smallint(45) NULL,
  PRIMARY KEY (pro_nombreEmpresa)
)
ENGINE = InnoDB;
Insert into PRODUCTOR VALUES 
('Panorama', 3148944963, 'Sandra','Cortinas', '5'),
('Pentagrama', 3138896213,'Rolando','Cortinas', '8'),
('Safra', 3203997555,'Sonia','Cortinas', '6'),
('Interxab', 3224158447, 'Carlos','Cortinas', '1'),
('Vertiblins', 3204112296,'Alex','Cortinas', '2')
;

-- -----------------------------------------------------
-- Table `mydb`.`VENTA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS VENTA;

CREATE TABLE IF NOT EXISTS VENTA(
  ven_id INT NOT NULL,
  cli_Documento INT NOT NULL,
  ase_Documento INT NOT NULL,
  ven_fecha DATE NOT NULL Default (CURRENT_DATE),
  ins_Documento INT NOT NULL,
  ven_precio bigint ,
  PRIMARY KEY (ven_id),
  foreign key(ase_documento) references ASESOR(ase_documento),
  foreign key(cli_documento) references CLIENTE(cli_documento) ,
  foreign key(ins_documento) references INSTALADOR(ins_documento)
)
ENGINE = InnoDB;
Insert into VENTA Values
(6542, 4322245, 21112922, '2022/08/31', 4556673,0),
(6234, 3466781, 21112922, '2022/02/10', 3112386,0),
(93323, 7564322, 1000184885, '2022/02/11', 3112386,0),
(7432, 4322245, 1000184885,  '2022/03/22', 3466781,0),
(8213, 64553221, 34555212,  '2022/02/24', 4556673,0),
(2314, 2122887, 12567831,  '2022/02/10', 3466781,0),
(4321, 5534441, 1000184885, '2022/08/11', 4556673,0),
(2251, 6344421, 12567831,  '2022/07/02', 4556673,0),
(6421, 2122887, 21112922, '2022/06/11', 4556673,0),
(9853, 8966421, 21112922,  '2022/05/24', 3466781,0)
;

-- -----------------------------------------------------
-- Table `mydb`.`PEDIDO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS PEDIDO ;

CREATE TABLE IF NOT EXISTS PEDIDO (
  ped_id INT NOT NULL,
  ped_metodoPago VARCHAR(45) NULL,
  ped_fechaEnvio DATE NOT NULL,
  ped_fechaEntrega DATE NULL,
  suc_direccion varchar(100) NOT NULL,
  pro_nombreEmpresa VARCHAR(70) NOT NULL,
  ven_id int NOT NULL,
  ped_costoPed VARCHAR(45) NOT NULL,
  PRIMARY KEY (ped_id),
  FOREIGN KEY (suc_direccion) references SUCURSAL(suc_direccion),
  FOREIGN KEY (pro_nombreEmpresa) REFERENCES PRODUCTOR (pro_nombreEmpresa),
  FOREIGN KEY (ven_id) REFERENCES VENTA (ven_id) ON DELETE CASCADE ON UPDATE CASCADE
    )
ENGINE = InnoDB;
insert into PEDIDO values 
(331663, 'Efectivo', '2022/03/22', '2022/03/27','Cr51 #134-14','Panorama',7432,130000),
(359097, 'Efectivo', '2022/08/31', '2022/09/02','Cr51 #134-14','Panorama',6542,1500000),
(327395, 'Transferencia', '2022/02/24', '2022/02/28','Cr51 #134-14','Pentagrama',8213,300000),
(324465, 'Efectivo', '2022/02/08', '2022/02/12', 'Cr17 #161-31','VertiBlins',6234,230000),
(323762, 'Efectivo', '2022/02/05', null, 'Cr17 #161-31','Safra',3323,200000),
(542123, 'Efectivo', '2022/02/11', null, 'Cr17 #161-31','Pentagrama',8213,350000),
(657531, 'Efectivo', '2022/08/07','2022/08/12', 'Cr17 #161-31','Safra',4321,500000),
(124563, 'Efectivo', '2022/07/04', null, 'Cr51 #134-14','Safra',2251,700000),
(543233, 'Transferencia', '2022/06/12','2022/06/19', 'Cr35a #57 91','Pentagrama',6421,870000),
(734523, 'Efectivo', '2022/05/25','2022/06/02', 'Cr35a #57 91','Panorama',9853,1000000)
;

-- -----------------------------------------------------
-- Table `mydb`.`PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS PRODUCTO;

CREATE TABLE IF NOT EXISTS PRODUCTO (
  pro_nombreId VARCHAR(100) NOT NULL,
  pro_nombreEmpresa VARCHAR(70) NOT NULL,
  pro_precio INT NOT NULL,
  pro_funcionamiento Enum ('Enrrollable', 'Tradicional' , 'Panel Japones', 'Romana', 'Sheer', 'Vertical', 'Persiana', 'Piso') NOT NULL,
  pro_foto LONGBLOB NULL,
  PRIMARY KEY (pro_nombreId, pro_nombreEmpresa),
  FOREIGN KEY (pro_nombreEmpresa) REFERENCES PRODUCTOR (pro_nombreEmpresa) ON DELETE CASCADE ON UPDATE CASCADE
)
ENGINE = InnoDB;
Insert into PRODUCTO VALUES 
('Sheer Screen blanca', 'Panorama', 120000, 'Sheer', ''),
('Sheer Screen Blanca', 'Pentagrama', 140000, 'Sheer',''),
('Screen Alabaster 10%', 'Panorama', 90000, 'Enrrollable',''),
('BlackOut Blanco', 'Vertiblins', 60000, 'Enrrollable',''),
('Panel Japones gris', 'Panorama', 120000, 'Panel Japones' ,''),
('Sheer Elegance Tiny gris', 'Panorama', 180000, 'Sheer',''),
('BlackOut Negro', 'Pentagrama', 100000, 'Enrrollable',''),
('Screen Blanco', 'Safra', 110000, 'Enrrollable',''),
('BlackOut Blanco', 'Safra', 70000, 'Enrrollable',''),
('Panel Japones Screen gris', 'Safra', 130000, 'Panel Japones','')
;

-- -----------------------------------------------------
-- Table `mydb`.`MANTENIMIENTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS MANTENIMIENTO ;

CREATE TABLE IF NOT EXISTS MANTENIMIENTO(
  man_id INT NOT NULL,
  man_tipoMante VARCHAR(45) NOT NULL,
  man_productorReparar VARCHAR(100) NOT NULL,
  man_fallas VARCHAR(300) NULL,
  cli_documento INT NOT NULL,
  suc_direccion varchar(100) NOT NULL,
  PRIMARY KEY (man_id),
  FOREIGN KEY (cli_documento) REFERENCES CLIENTE (cli_documento),
  FOREIGN KEY (suc_direccion) REFERENCES SUCURSAL (suc_direccion)
)
ENGINE = InnoDB;

insert into MANTENIMIENTO values
(2342, 'Reparacion', 'Sheer Elegance', 'fallo en el mecanismo',7564322,'Cr51 #134-14'),
(5422, 'Lavado', 'BlackOut', 'mancha cerca al tubo',7564322,'Cr51 #134-14'),
(4532, 'Reparacion y Lavado', 'Screen', 'bordes desflecados cadenilla rota', 5423664,'Cr17 #161-31'),
(4653, 'Lavado', 'Cortina Corriente', 'pequeño roto en la ultima seccion',64553221,'Cr51 #134-14'),
(5456, 'Reparacion', 'BlackOut', 'bordes desflecados',64553221,'Cr51 #134-14')
;
-- -----------------------------------------------------
-- Table `mydb`.`CITA`
-- -----------------------------------------------------
DROP TABLE IF EXISTS CITA ;

CREATE TABLE IF NOT EXISTS CITA(
  cli_documento INT NOT NULL,
  ase_documento INT NOT NULL,
  cit_fecha DATETIME NOT NULL,
  cit_direccion VARCHAR(70) NOT NULL,
  PRIMARY KEY (cit_fecha, ase_documento, cli_documento),
  FOREIGN KEY (ase_documento) REFERENCES ASESOR (ase_documento),
  FOREIGN KEY (cli_documento) REFERENCES CLIENTE (cli_documento)
)
ENGINE = InnoDB;
Insert into CITA values 
(5566345, 1000184885, '2022/07/10 14:00', 'Cra 102 #154-30 int a apto 205'),
(7564322, 1000184885, '2022/11/11 15:00', 'Cr51 #134-14'),
(7564322, 21112922, '2022/08/12 9:00', 'Cra 76 #152b-77'),
(64553221, 34555212, '2022/06/14', 'Cr17 #161-31'),
(5423664, 21112922, '2022/03/26', 'Cr17 #161-31'),
(4322245, 1000184885, '2022/04/21', 'Calle 150 #45-65'),
(4322245, 1000184885, '2023/01/12', 'Calle 150 #45-65'),
(4322245, 34555212, '2022/09/01', 'Cr17 #161-31');

-- -----------------------------------------------------
-- Table `mydb`.`VENTA_INCLUYE_PRODUCTO`
-- -----------------------------------------------------
DROP TABLE IF EXISTS VENTA_INCLUYE_PRODUCTO;

CREATE TABLE IF NOT EXISTS VENTA_INCLUYE_PRODUCTO (
  ven_id INT NOT NULL,
  pro_nombreId VARCHAR(100) NOT NULL,
  productor_pro_nombreEmpresa VARCHAR(70) NOT NULL,
  vip_prod_ancho float NOT NULL,
  vip_prod_alto float NOT NULL,
  vip_cantidad INT NOT NULL,
  PRIMARY KEY (ven_id, pro_nombreId, productor_pro_nombreEmpresa, vip_prod_ancho, vip_prod_alto),
  FOREIGN KEY (ven_id) REFERENCES VENTA (ven_id) ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (pro_nombreId , productor_pro_nombreEmpresa) REFERENCES PRODUCTO (pro_nombreId , pro_nombreEmpresa)
)
ENGINE = InnoDB;

Insert into VENTA_INCLUYE_PRODUCTO Values 
(6542, 'Sheer Screen blanca', 'Panorama', 1.70, 1.70, 2),
(6542, 'BlackOut Blanco', 'Vertiblins', 1.70, 1.70, 2),
(6234, 'Panel Japones Screen gris', 'Safra', 2.20, 2.30, 1),
(3323, 'BlackOut Negro', 'Pentagrama', 1.73, 1.80, 1),
(3323, 'BlackOut Negro', 'Pentagrama', 1.85, 1.60, 1),
(3323, 'BlackOut Negro', 'Pentagrama', 1.30, 1.20, 1),
(7432, 'Screen Alabaster 10%', 'Panorama', 1.96, 2.00, 2),
(7432, 'Sheer Elegance Tiny gris', 'Panorama', 1.65, 1.80, 1),
(8213, 'Panel Japones Screen gris', 'Safra', 2.20, 2.30, 2),
(2314, 'Sheer Screen Blanca', 'Pentagrama', 1.45, 1.80, 2),
(4321, 'Sheer Screen blanca', 'Panorama', 1.91, 1.95, 1),
(4321, 'Sheer Screen blanca', 'Pentagrama', 1.91, 1.95, 1),
(2251, 'Screen Blanco', 'Safra', 0.92, 1.50, 4),
(6421, 'Sheer Elegance Tiny gris', 'Panorama', 1.55, 1.70, 2),
(9853, 'Panel Japones gris', 'Panorama', 1.66, 2.25, 1)
;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
